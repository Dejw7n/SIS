<section>
	<div class="flex mb-8">
		<div class="grid">
			<h1 class="my-auto text-2xl font-semibold text-gray-700">Příspěvky</h1>
		</div>
		<div class="flex ml-auto">
			<button (click)="openAddPosts()" class="px-6 py-2 rounded-sm font-semibold text-sm text-white bg-red-600 hover:bg-red-700">Nový příspěvek</button>
		</div>
	</div>
	<nz-empty *ngIf="polePrispevku.length === 0; else displaying"></nz-empty>
</section>

<ng-template #displaying>
	<div class="flex flex-wrap gap-10">
		<div class="flex flex-grow h-fit rounded-lg overflow-hidden shadow-lg bg-white" *ngFor="let prispevek of polePrispevku">
			<div class="max-w-[8px] w-full" [ngClass]="{ 'bg-yellow-400': prispevek.priority == 2, 'bg-red-500': prispevek.priority == 3 }"></div>
			<div class="w-full grid gap-8 p-8">
				<div class="w-full h-fit grid gap-4">
					<div class="flex">
						<div class="flex">
							<p class="text-lg font-semibold leading-none">{{ prispevek.title }}</p>
						</div>
						<div class="w-5 ml-auto">
							<button mat-icon-button [matMenuTriggerFor]="menu" aria-label="Example icon-button with a menu">
								<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="#777" class="w-6 h-6">
									<path stroke-linecap="round" stroke-linejoin="round" d="M8.625 12a.375.375 0 11-.75 0 .375.375 0 01.75 0zm0 0H8.25m4.125 0a.375.375 0 11-.75 0 .375.375 0 01.75 0zm0 0H12m4.125 0a.375.375 0 11-.75 0 .375.375 0 01.75 0zm0 0h-.375M21 12a9 9 0 11-18 0 9 9 0 0118 0z" />
								</svg>
							</button>
							<mat-menu #menu="matMenu">
								<button mat-menu-item>
									<span>Upravit příspěvek</span>
								</button>
								<button mat-menu-item disabled>
									<span>Historie změn</span>
								</button>
								<button (click)="deletePost(prispevek.id)" mat-menu-item data-button-danger="true" class="button-mat-danger bg-red-600">
									<span class="text-white">Smazat příspěvek</span>
								</button>
							</mat-menu>
						</div>
					</div>
					<div class="pr-5 overflow-x-auto">
						<div [innerHTML]="prispevek.text"></div>
					</div>
					<div class="flex border-t-2 py-4">
						<div class="flex flex-wrap-reverse rounded-lg bg-violet-50">
							<div *ngFor="let i of [1, 2, 3]" class="flex px-4 py-3 rounded-lg cursor-pointer hover:bg-violet-100">
								<div class="flex h-10">
									<div class="">
										<svg xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24" stroke-width="1.5" stroke="#dc2626" class="w-10 h-10">
											<path stroke-linecap="round" stroke-linejoin="round" d="M19.5 14.25v-2.625a3.375 3.375 0 00-3.375-3.375h-1.5A1.125 1.125 0 0113.5 7.125v-1.5a3.375 3.375 0 00-3.375-3.375H8.25m2.25 0H5.625c-.621 0-1.125.504-1.125 1.125v17.25c0 .621.504 1.125 1.125 1.125h12.75c.621 0 1.125-.504 1.125-1.125V11.25a9 9 0 00-9-9z" />
										</svg>
									</div>
									<div class="grid ml-1 py-1">
										<p class="font-semibold leading-none">Šatny.xls</p>
										<p class="mt-auto text-neutral-500 leading-none">3mb</p>
									</div>
								</div>
							</div>
						</div>
					</div>
				</div>
				<div class="flex h-10 mt-auto">
					<div class="flex gap-2 w-full">
						<div class="h-full overflow-hidden rounded-full">
							<img src="/assets/images/profile.jpg" alt="" class="h-full" />
						</div>
						<div class="flex flex-col py-1">
							<p class="text-sm text-zinc-500 font-semibold leading-none">Miroslav Douda</p>
							<div class="mt-auto">
								<p class="text-sm text-stone-400 leading-none">15.08.2022</p>
							</div>
						</div>
					</div>
					<div class="flex ml-auto" *ngIf="prispevek.priority == 3">
						<div class="mt-auto">
							<span class="ml-auto text-xs leading-none">Upraveno uživatelem {{ prispevek.userID }} v {{ prispevek.date }}</span>
						</div>
					</div>
				</div>
			</div>
		</div>
	</div>
</ng-template>
